class ShoppingCart{constructor(){this.items=[],this.loadFromStorage(),this.init()}init(){this.updateCartIcon(),this.addEventListeners()}addEventListeners(){document.getElementById("cartButton").addEventListener("click",(()=>this.openCart())),document.getElementById("closeCart").addEventListener("click",(()=>this.closeCart())),document.getElementById("cartModal").addEventListener("click",(e=>{e.target.id==="cartModal"&&this.closeCart()})),document.getElementById("checkoutButton").addEventListener("click",(()=>this.checkout())),document.querySelectorAll(".buy-button").forEach(((e,t)=>{e.addEventListener("click",(()=>this.addItem(t)))}))}addItem(e){const t=document.querySelectorAll(".card")[e],n={id:e,name:t.querySelector("h2").textContent,price:parseInt(t.querySelector(".price").textContent.replace(/\D/g,"")),image:t.querySelector("img").src,quantity:1},o=this.items.find((e=>e.id===n.id));o?o.quantity++:this.items.push(n),this.saveToStorage(),this.updateCartIcon(),this.showAddToCartMessage(n.name)}removeItem(e){this.items=this.items.filter((t=>t.id!==e)),this.saveToStorage(),this.updateCartIcon(),this.updateCartModal()}updateQuantity(e,t){const n=this.items.find((t=>t.id===e));n&&(n.quantity+=t,n.quantity<=0?this.removeItem(e):(this.saveToStorage(),this.updateCartIcon(),this.updateCartModal()))}openCart(){document.getElementById("cartModal").style.display="block",document.body.style.overflow="hidden",this.updateCartModal()}closeCart(){document.getElementById("cartModal").style.display="none",document.body.style.overflow="auto"}updateCartModal(){const e=document.getElementById("cartItems"),t=document.getElementById("cartTotal");if(0===this.items.length){e.innerHTML='<p class="empty-cart-message">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>',t.textContent="0";return}let n=0;e.innerHTML=this.items.map((e=>{const t=e.price*e.quantity;return n+=t,`<div class="cart-item"><img src="${e.image}" alt="${e.name}" class="cart-item-image"><div class="cart-item-details"><h3>${e.name}</h3><p class="cart-item-price">${e.price} ‚ÇΩ √ó ${e.quantity}</p><p class="cart-item-total">${t} ‚ÇΩ</p></div><div class="cart-item-controls"><button class="quantity-btn" onclick="cart.updateQuantity(${e.id}, -1)" aria-label="–£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">-</button><span class="quantity-display">${e.quantity}</span><button class="quantity-btn" onclick="cart.updateQuantity(${e.id}, 1)" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">+</button><button class="remove-btn" onclick="cart.removeItem(${e.id})" aria-label="–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä">üóëÔ∏è</button></div></div>`})).join(""),t.textContent=n.toLocaleString()}updateCartIcon(){const e=document.getElementById("cartCount"),t=this.items.reduce(((e,t)=>e+t.quantity),0);e.textContent=t,t>0?e.classList.add("has-items"):e.classList.remove("has-items")}showAddToCartMessage(e){const t=document.createElement("div");t.className="cart-notification",t.innerHTML=`<div class="notification-content"><span>‚úÖ –¢–æ–≤–∞—Ä "${e}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!</span></div>`,document.body.appendChild(t),setTimeout((()=>{t.remove()}),3e3)}checkout(){if(0===this.items.length)return void alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!");const e=this.items.reduce(((e,t)=>e+t.price*t.quantity),0);confirm(`–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ —Å—É–º–º—É ${e.toLocaleString()} ‚ÇΩ?`)&&(alert("–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω! –° –≤–∞–º–∏ —Å–≤—è–∂–µ—Ç—Å—è –º–∞—Å—Ç–µ—Ä —Ö—Ä–∞–º–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è."),this.items=[],this.saveToStorage(),this.updateCartIcon(),this.updateCartModal(),this.closeCart())}saveToStorage(){localStorage.setItem("suibianCart",JSON.stringify(this.items))}loadFromStorage(){const e=localStorage.getItem("suibianCart");e&&(this.items=JSON.parse(e))}}let cart;document.addEventListener("DOMContentLoaded",(function(){cart=new ShoppingCart,console.log("–ö–æ—Ä–∑–∏–Ω–∞ –•—Ä–∞–º–∞ –°—É–π–±—è–Ω—å —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")}));